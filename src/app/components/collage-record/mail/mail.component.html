<p-card>
  <ng-template pTemplate="header">
    <div class="row">
      <div class="col-4 p-fluid grid">
        <form [formGroup]="filterForm">
          <br>
          <p-calendar formControlName="first_Diwan_Date" dateFormat="dd.mm.yy"
            placeholder="من تاريخ"></p-calendar>
          <br>
          <p-calendar formControlName="last_Diwan_Date" dateFormat="dd.mm.yy"
            placeholder="الى تاريخ"></p-calendar>
          <br>
        </form>
      </div>
      <div class="col-4 p-fluid grid">
        <form [formGroup]="filterForm">
          <br>
          <p-dropdown [options]="typeOption" formControlName="type" optionLabel="name" optionValue="name" placeholder="اختر نوع">
          </p-dropdown>
          <br>
          <p-dropdown [options]="collages" formControlName="collage_FK" optionLabel="Collage_Name" optionValue="Collage_ID"
            placeholder="اختر كلية"></p-dropdown>
          <br>
        </form>
      </div>
      <div class="col-4 p-fluid grid">
        <br>
        <button pButton type="button" class="p-button-raised" (click)="search(filterForm.value)">بحث</button>
        <br><br>
        <button pButton type="button" class="p-button-warning" (click)="refresh()">تحديث</button>
      </div>
    </div>
  </ng-template>

  <div class="table">
    <p-table [value]="centerRecordDemand" [responsive]="true" responsiveLayout="scroll">
      <ng-template pTemplate="header">
        <tr>
          <th>رقم الطلب</th>
          <th>تاريخ الطلب</th>
          <th>الكلية</th>
          <th>رقم الديوان</th>
          <th>رقم المراسل</th>
          <th>تاريخ</th>
          <th>صادر/وارد</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-demand>
        <tr>
          <!-- <i (click)="showDemandDialog(demand.Demand.Demand_ID)"
              class="pi pi-info-circle" style="font-size: 20px;"></i> -->
          <td>{{demand.Demand.Demand_ID}}  </td>
          <td>{{demand.Demand.Demand_Date | date: 'dd/MM/yyyy'}}</td>
          <td>{{demand.Collage.Collage_Name}}</td>
          <td>{{demand.Diwan_NO}}</td>
          <td>{{demand.Reporter_Name}}</td>
          <td>{{demand.Diwan_Date | date: 'dd/MM/yyyy'}}</td>
          <td>{{demand.Type}}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage" let-columns>
        <tr>
          <td [attr.colspan]="5" style="text-align: center;">
            <strong>لا يوجد بيانات لعرضها.</strong>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</p-card>

<p-dialog header="معلومات الطلب" [(visible)]="demandDialog">
  <p-table [value]="demandDetail" [responsive]="true" responsiveLayout="scroll">
    <ng-template pTemplate="header">
      <tr>
        <th>تاريخ الطلب</th>
        <th>الكلية</th>
        <th>رقم الديوان</th>
        <th>رقم المراسل</th>
        <th>تاريخ</th>
        <th>صادر/وارد</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-demand>
      <tr>
        <td>{{demand.Demand.Demand_Date | date: 'dd/MM/yyyy'}}</td>
        <td>{{demand.Collage.Collage_Name}}</td>
        <td>{{demand.Diwan_NO}}</td>
        <td>{{demand.Reporter_Name}}</td>
        <td>{{demand.Diwan_Date | date: 'dd/MM/yyyy'}}</td>
        <td>{{demand.Type}}</td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage" let-columns>
      <tr>
        <td [attr.colspan]="5" style="text-align: center;">
          <strong>لا يوجد بيانات لعرضها.</strong>
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-dialog>